\chapter{Approach \& Results}\label{chap:approach_results}

This Chapter presents the main body of work resultant of the study performed for this thesis, and it is divided in two main parts. The first one is related to research design and it starts by describing how the current design of the \emph{escolinhas.pt} platform was performed and which tools were used to perform said analysis, and how the variability needs for each one of the areas described in \ref{sec:case-study_areas} were identified. The second part describes the development process of each one of the case-study areas: Roles, Social Network and Document Editor. For each one of these areas, it will present the current design and variability requirements. Based on these informations, candidate patterns will be presented, as well as the chosen patterns used to solve the problem and the rationale behind it, outlining why certain patterns were discarded. Then, implementation details will follow, concluding each section with an analysis of the impact each solution had, as well as some results (where applicable).

\section{Research Design}\label{sec:research_design}

The first step taken in order to identify potential problems was to study its current design. This step led to the identification of several points that negatively impacted the variability of the application. After the identification of these points, variability requirements were gathered, so that small, functional prototypes could be built and their impact analyzed within the platform.

\subsection{Current Design Analysis}\label{sec:current_design_analysis}

A thorough analysis of the current design of the application was the first step taken, in order to identify potential problems within the platform. This study was conducted using a series of tools\footnote{Rubymine 2.0 \cite{rubymine} and Rails ERD \cite{rails_erd}} that, unfortunately (at the time of writing), proved unsuccessful in extracting an \emph{Entity Relationship Diagram} from the code of the application --- either they did not work with the current versions of Ruby/Rails used by the platform (Rails ERD) or generated an inaccurate graph. As such, another approach was taken: the product owner of the platform was queried on what he felt were the variability ``hotspots'' of the application: this narrowed the scope of the current design analysis, allowing focus on three different areas, as stated in~\ref{sec:case-study_areas}. These areas were then manually studied --- by analyzing the current database schema, as well as the Model (MVC) source files --- in order to extract the \emph{Entity Relationship Diagrams} relative to each one --- shown ahead on \ref{sec:fa_roles_variability_requirements}, \ref{sec:fa_social_network} and \ref{sec:fa_documents} --- which allowed analyzing each one as independently as possible, so that the applied design patterns (if any) would emerge --- making the task of pinpointing exactly what was wrong with each approach much easier.

\subsection{Variability Analysis}\label{sec:variability_analysis}

Each one of the areas --- Roles, Social Network and the Document Editor --- referred in \ref{sec:case-study_areas} was then studied in order to determine their variability requirements, and to which degree this variability should exist: developer, system administrator, or even end-user. These requirements were defined by the carefully considering the opinions from the users of the platform, the product owner and the main developers. These requirements were then used to determine which design patterns would be more appropriate to achieve the problems posed by each of the areas, and why.

\subsection{Implementation \& Impact Analysis}

For each one the three focus areas, functional prototypes were developed, either directly on top of the platform (Social Network, \ref{sec:fa_social_network}, and User Roles, \ref{sec:fa_roles}) or as an independent proof-of-concept application (Document Editor, \ref{sec:fa_documents}), that, as soon as possible, will be integrated into the main platform. These prototypes, however simplistic (and not yet in production), will be able to validate the research and decisions made throughout the next sections. All of the prototypes are implemented using Ruby 1.9.1 and Rails 2.3.9, as used in the production and development environments of \emph{escolinhas.pt}.

The impact analysis for each of these areas will be made in two different fronts: variability and performance. Variability impact analysis will be concerned with the increase in flexibility/configurability of a certain component, and how it measures to the objectives established beforehand. Performance analysis will (if applicable) examine the how much more (or less) performant each one of the implementations is, compared to the previous solutions.

\section{Development}\label{sec:development}

After studying the current design of the application and collecting the necessary requirements, the development phase took place: the major variability requirements were outlined, and a set of design patterns carefully considered, with their benefits and disadvantages weighed in order to correctly choose the most appropriate solution. Finally, proof-of-concept prototypes were built so that the choice of patterns could be validated and the impact resultant from said implementations measured.

\input{focus_areas/roles}
\input{focus_areas/social_network}
\input{focus_areas/document_editor}
